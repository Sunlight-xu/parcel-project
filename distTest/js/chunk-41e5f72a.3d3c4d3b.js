(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e5f72a"],{"0ff9":function(e,t,i){},"13d5":function(e,t,i){"use strict";var s=i("23e7"),o=i("d58f").left,a=i("a640"),n=i("2d00"),r=i("605d"),c=a("reduce"),d=!r&&n>79&&n<83;s({target:"Array",proto:!0,forced:!c||d},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},2532:function(e,t,i){"use strict";var s=i("23e7"),o=i("e330"),a=i("5a34"),n=i("1d80"),r=i("577e"),c=i("ab13"),d=o("".indexOf);s({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~d(r(n(this)),r(a(e)),arguments.length>1?arguments[1]:void 0)}})},"4d90":function(e,t,i){},"5a34":function(e,t,i){var s=i("da84"),o=i("44e7"),a=s.TypeError;e.exports=function(e){if(o(e))throw a("The method doesn't accept regular expressions");return e}},a092:function(e,t,i){"use strict";i("0ff9")},a434:function(e,t,i){"use strict";var s=i("23e7"),o=i("da84"),a=i("23cb"),n=i("5926"),r=i("07fa"),c=i("7b0b"),d=i("65f0"),l=i("8418"),u=i("1dde"),h=u("splice"),f=o.TypeError,m=Math.max,p=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var i,s,o,u,h,_,g=c(this),T=r(g),k=a(e,T),C=arguments.length;if(0===C?i=s=0:1===C?(i=0,s=T-k):(i=C-2,s=p(m(n(t),0),T-k)),T+i-s>v)throw f(b);for(o=d(g,s),u=0;u<s;u++)h=k+u,h in g&&l(o,u,g[h]);if(o.length=s,i<s){for(u=k;u<T-s;u++)h=u+s,_=u+i,h in g?g[_]=g[h]:delete g[_];for(u=T;u>T-s+i;u--)delete g[u-1]}else if(i>s)for(u=T-s;u>k;u--)h=u+s-1,_=u+i-1,h in g?g[_]=g[h]:delete g[_];for(u=0;u<i;u++)g[u+k]=arguments[u+2];return g.length=T-s+i,o}})},ab13:function(e,t,i){var s=i("b622"),o=s("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[o]=!1,"/./"[e](t)}catch(s){}}return!1}},c622:function(e,t,i){"use strict";i("4d90")},c6e1:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config_manage"},[i("CommonTab",{attrs:{tabList:e.tabTypeList},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),"报警配置"===e.tabType?i("div",{staticClass:"config_manage_result"},[i("div",{staticClass:"result_item"},[i("div",{staticClass:"result_item_title"},[e._v("一级报警")]),i("div",{staticClass:"result_item_top"},[i("div",{staticClass:"item_bgc"},[i("span",[e._v("背景色")]),i("el-color-picker",{model:{value:e.first.color,callback:function(t){e.$set(e.first,"color",t)},expression:"first.color"}})],1),i("div",{staticClass:"item_radio"},[i("el-checkbox",{model:{value:e.first.checked,callback:function(t){e.$set(e.first,"checked",t)},expression:"first.checked"}},[e._v(" 开启声音报警 ")]),i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:".mp3","auto-upload":!1,"show-file-list":!1,"on-change":e.haldleFirstUpload}},[i("a",[e._v(e._s(e.first.videoName?e.first.videoName:"上传报警声音"))])])],1)],1)]),i("div",{staticClass:"result_item_bottom"},[i("h4",[e._v("复核视频")]),i("span",[e._v("前")]),i("el-input",{model:{value:e.first.frontTime,callback:function(t){e.$set(e.first,"frontTime",e._n(t))},expression:"first.frontTime"}}),i("span",[e._v("至")]),i("span",[e._v("后")]),i("el-input",{model:{value:e.first.laterTime,callback:function(t){e.$set(e.first,"laterTime",e._n(t))},expression:"first.laterTime"}})],1)]),i("div",{staticClass:"result_item"},[i("div",{staticClass:"result_item_title"},[e._v("二级报警")]),i("div",{staticClass:"result_item_top"},[i("div",{staticClass:"item_bgc"},[i("span",[e._v("背景色")]),i("el-color-picker",{model:{value:e.second.color,callback:function(t){e.$set(e.second,"color",t)},expression:"second.color"}})],1),i("div",{staticClass:"item_radio"},[i("el-checkbox",{model:{value:e.second.checked,callback:function(t){e.$set(e.second,"checked",t)},expression:"second.checked"}},[e._v(" 开启声音报警 ")]),i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:".mp3","auto-upload":!1,"show-file-list":!1,"on-change":e.hanldleSecondUpload}},[i("a",[e._v(e._s(e.second.videoName?e.second.videoName:"上传报警声音"))])])],1)],1)]),i("div",{staticClass:"result_item_bottom"},[i("h4",[e._v("复核视频")]),i("span",[e._v("前")]),i("el-input",{model:{value:e.second.frontTime,callback:function(t){e.$set(e.second,"frontTime",e._n(t))},expression:"second.frontTime"}}),i("span",[e._v("至")]),i("span",[e._v("后")]),i("el-input",{model:{value:e.second.laterTime,callback:function(t){e.$set(e.second,"laterTime",e._n(t))},expression:"second.laterTime"}})],1)]),i("div",{staticClass:"result_item"},[i("div",{staticClass:"result_item_title"},[e._v("三级报警")]),i("div",{staticClass:"result_item_top"},[i("div",{staticClass:"item_bgc"},[i("span",[e._v("背景色")]),i("el-color-picker",{model:{value:e.third.color,callback:function(t){e.$set(e.third,"color",t)},expression:"third.color"}})],1),i("div",{staticClass:"item_radio"},[i("el-checkbox",{model:{value:e.third.checked,callback:function(t){e.$set(e.third,"checked",t)},expression:"third.checked"}},[e._v(" 开启声音报警 ")]),i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:".mp3","auto-upload":!1,"show-file-list":!1,"on-change":e.handleThirdUpload}},[i("a",[e._v(e._s(e.third.videoName?e.third.videoName:"上传报警声音"))])])],1)],1)]),i("div",{staticClass:"result_item_bottom"},[i("h4",[e._v("复核视频")]),i("span",[e._v("前")]),i("el-input",{model:{value:e.third.frontTime,callback:function(t){e.$set(e.third,"frontTime",e._n(t))},expression:"third.frontTime"}}),i("span",[e._v("至")]),i("span",[e._v("后")]),i("el-input",{model:{value:e.third.laterTime,callback:function(t){e.$set(e.third,"laterTime",e._n(t))},expression:"third.laterTime"}})],1)]),i("div",{staticClass:"submit"},[i("el-button",{on:{click:function(t){return e.handleCancel()}}},[e._v(" 重置 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v(" 提交 ")])],1)]):"登陆IP"===e.tabType?i("div",{staticClass:"config_manage_result"},[i("div",{staticClass:"ip_config_submit"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addIpConfig}},[e._v("添加")])],1),i("div",{staticClass:"table_content"},[i("common-table",{attrs:{isShowIndex:!0,tableData:e.ipList,tableColArray:e.tableColumn},scopedSlots:e._u([{key:"operation",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.changeIpConfig(t.row)}}},[e._v("编辑")]),i("el-button",{staticStyle:{color:"#FF4D4F"},attrs:{type:"text"},on:{click:function(i){return e.delIpConfig(t.row)}}},[e._v(" 删除 ")])]}}])})],1)]):e._e(),i("el-dialog",{attrs:{title:e.dialogTitle,width:"400px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},["删除IP"!==e.dialogTitle?i("div",[i("span",{staticClass:"input_item"},[i("span",{staticStyle:{width:"70px"}},[e._v("登录IP：")]),i("span",{staticStyle:{width:"200px"}},[i("el-input",{model:{value:e.inputIp,callback:function(t){e.inputIp=t},expression:"inputIp"}})],1)]),i("span",{staticClass:"input_item"},[i("span",{staticStyle:{width:"70px"}},[e._v("备注：")]),i("span",{staticStyle:{width:"200px"}},[i("el-input",{model:{value:e.inputCom,callback:function(t){e.inputCom=t},expression:"inputCom"}})],1)])]):i("span",[e._v("确定要删除此IP吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmConfig}},[e._v("确 定")])],1)])],1)},o=[],a=i("2909"),n=(i("ac1f"),i("1276"),i("4160"),i("d3b7"),i("caad"),i("2532"),i("99af"),i("a9e3"),i("b0c0"),i("a434"),i("13d5"),i("d81d"),i("3ca3"),i("ddb0"),i("5c96")),r=i("0fea"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tab_control"},[i("ul",e._l(e.tabList,(function(t){return i("li",{key:t,class:e.contentRadio==t?"active":"",on:{click:function(i){return e.changeTab(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])},d=[],l={props:{tabList:{type:Array,default:function(){return[]}},value:{default:""}},data:function(){return{contentRadio:this.value}},model:{prop:"value",event:"change"},watch:{value:function(){this.contentRadio=this.value}},methods:{changeTab:function(e){this.$emit("change",e)}}},u=l,h=(i("c622"),i("2877")),f=Object(h["a"])(u,c,d,!1,null,"fb76bd40",null),m=f.exports,p=i("b837"),v={name:"configManage",components:{CommonTab:m,CommonTable:p["a"]},data:function(){return{tabTypeList:["登陆IP"],tabType:"登陆IP",currentId:"",first:{video:"",color:"#FF4747",checked:!1,frontTime:0,laterTime:0,videoName:""},second:{video:"",color:"#FF8600",checked:!1,frontTime:0,laterTime:0,videoName:""},third:{video:"",color:"#FFDB00",checked:!1,frontTime:0,laterTime:0,videoName:""},ipList:[],operationList:[],tableColumn:[{label:"登陆IP",props:"ip_addr"},{label:"备注",props:"remark"},{label:"操作",props:"",type:"slot",slot:"operation"}],dialogVisible:!1,dialogTitle:"新增IP",inputIp:"",inputCom:""}},mounted:function(){this.getPreferece(),this.getIpList()},methods:{reset:function(){this.first.video="",this.first.color="#FF4747",this.first.checked=!1,this.first.frontTime=0,this.first.laterTime=0,this.first.videoName="",this.second.video="",this.second.color="#FF8600",this.second.checked=!1,this.second.frontTime=0,this.second.laterTime=0,this.second.videoName="",this.third.video="",this.third.color="#FFDB00",this.third.checked=!1,this.third.frontTime=0,this.third.laterTime=0,this.third.videoName=""},getPreferece:function(){var e=this;r["b"].getPreference().then((function(t){e.currentId=t.data.items[0].id,e.first.video=t.data.items[0].sound1,e.first.color=""!==t.data.items[0].color1?t.data.items[0].color1:e.first.color,e.first.checked=!!t.data.items[0].enable1,e.first.frontTime=t.data.items[0].before1,e.first.laterTime=t.data.items[0].after1,e.first.videoName=t.data.items[0].sound1.split("+")[1],e.second.video=t.data.items[0].sound2,e.second.color=""!==t.data.items[0].color2?t.data.items[0].color2:e.second.color,e.second.checked=!!t.data.items[0].enable2,e.second.frontTime=t.data.items[0].before2,e.second.laterTime=t.data.items[0].after2,e.second.videoName=t.data.items[0].sound2.split("+")[1],e.third.video=t.data.items[0].sound3,e.third.color=""!==t.data.items[0].color3?t.data.items[0].color3:e.third.color,e.third.checked=!!t.data.items[0].enable3,e.third.frontTime=t.data.items[0].before3,e.third.laterTime=t.data.items[0].after3,e.third.videoName=t.data.items[0].sound3.split("+")[1]}))},getIpList:function(){var e=this;Object(r["e"])().then((function(t){0===t.error_no&&(e.ipList=t.data.ips)}))},judgeType:function(e){return"number"===typeof e&&e>=0&&e<=10},handleSubmit:function(){var e=this,t=[],i=!1;if(t.push(this.first.frontTime,this.first.laterTime),t.push(this.second.frontTime,this.second.laterTime),t.push(this.third.frontTime,this.third.laterTime),t.forEach((function(t){e.judgeType(t)||(i=!0)})),i)n["Message"].error({message:"请输入正确的视频截取时间（0-10）秒"});else{var s={color1:this.first.color,enable1:this.first.checked?1:0,sound1:this.first.video?this.first.video.includes(this.first.videoName)?this.first.video:"".concat(this.first.video,"+").concat(this.first.videoName):"",before1:Number(this.first.frontTime),after1:Number(this.first.laterTime),color2:this.second.color,enable2:this.second.checked?1:0,sound2:this.second.video?this.second.video.includes(this.second.videoName)?this.second.video:"".concat(this.second.video,"+").concat(this.second.videoName):"",before2:Number(this.second.frontTime),after2:Number(this.second.laterTime),color3:this.third.color,enable3:this.third.checked?1:0,sound3:this.third.video?this.third.video.includes(this.third.videoName)?this.third.video:"".concat(this.third.video,"+").concat(this.third.videoName):"",before3:Number(this.third.frontTime),after3:Number(this.third.laterTime)};r["b"].changePreference(this.currentId,s).then((function(t){0===t.error_no&&(n["Message"].success({message:"设置成功"}),e.getPreferece())}))}},handleCancel:function(){this.reset()},haldleFirstUpload:function(e){var t=this,i=new FormData;console.log(e),"mp3"===e.name.split(".")[1]?e.name.split(".")[0].length>20?n["Message"].error({message:"音频文件名字不能超过20个字符"}):(i.append("file",e.raw),r["b"].uploadFile(i).then((function(i){t.first.video=i.items[0].remote,t.first.videoName=e.name}))):n["Message"].error({message:"请上传音频mp3格式的文件"})},hanldleSecondUpload:function(e){var t=this,i=new FormData;"mp3"===e.name.split(".")[1]?e.name.split(".")[0].length>20?n["Message"].error({message:"音频文件名字不能超过20个字符"}):(i.append("file",e.raw),r["b"].uploadFile(i).then((function(i){t.second.video=i.items[0].remote,t.second.videoName=e.name}))):n["Message"].error({message:"请上传音频mp3格式的文件"})},handleThirdUpload:function(e){var t=this,i=new FormData;"mp3"===e.name.split(".")[1]?e.name.split(".")[0].length>20?n["Message"].error({message:"音频文件名字不能超过20个字符"}):(i.append("file",e.raw),r["b"].uploadFile(i).then((function(i){t.third.video=i.items[0].remote,t.third.videoName=e.name}))):n["Message"].error({message:"请上传音频mp3格式的文件"})},addIp:function(){this.ipList.push({ip_addr:"",new:!0})},removeIp:function(e){var t;(t=this.operationList).push.apply(t,Object(a["a"])(this.ipList.splice(e,1)))},submitIpConfig:function(){var e=this,t=this.ipList.reduce((function(e,t){return t["new"]&&""!==t.ip_addr?(e.push(t),e):e}),[]),i=[].concat(Object(a["a"])(this.operationList),Object(a["a"])(t)).map((function(e){return e.id?Object(r["c"])(e.id):Object(r["a"])({ip_addr:e.ip_addr})}));Promise.all(i).then((function(){n["Message"].success("提交成功"),e.getIpList()})),this.operationList=[]},addIpConfig:function(){this.dialogTitle="新增IP",this.dialogVisible=!0},changeIpConfig:function(e){this.dialogTitle="修改IP",this.currentRow=e,this.inputIp=e.ip_addr,this.inputCom=e.remark,this.dialogVisible=!0},delIpConfig:function(e){this.dialogTitle="删除IP",this.currentRow=e,this.dialogVisible=!0},confirmConfig:function(){var e=this;"新增IP"===this.dialogTitle?Object(r["a"])({ip_addr:this.inputIp,remark:this.inputCom}).then((function(t){0===t.error_no&&(n["Message"].success("新增成功"),e.getIpList())})):"修改IP"===this.dialogTitle?Object(r["d"])({id:this.currentRow.id,ip_addr:this.inputIp===this.currentRow.ip_addr?void 0:this.inputIp,remark:this.inputCom===this.currentRow.remark?void 0:this.inputCom}).then((function(t){0===t.error_no&&(n["Message"].success("修改成功"),e.getIpList())})):"删除IP"===this.dialogTitle&&Object(r["c"])(this.currentRow.id).then((function(t){0===t.error_no&&(n["Message"].success("删除成功"),e.getIpList())})),this.dialogVisible=!1}}},b=v,_=(i("a092"),Object(h["a"])(b,s,o,!1,null,null,null));t["default"]=_.exports},caad:function(e,t,i){"use strict";var s=i("23e7"),o=i("4d64").includes,a=i("44d2");s({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d58f:function(e,t,i){var s=i("da84"),o=i("59ed"),a=i("7b0b"),n=i("44ad"),r=i("07fa"),c=s.TypeError,d=function(e){return function(t,i,s,d){o(i);var l=a(t),u=n(l),h=r(l),f=e?h-1:0,m=e?-1:1;if(s<2)while(1){if(f in u){d=u[f],f+=m;break}if(f+=m,e?f<0:h<=f)throw c("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=m)f in u&&(d=i(d,u[f],f,l));return d}};e.exports={left:d(!1),right:d(!0)}}}]);