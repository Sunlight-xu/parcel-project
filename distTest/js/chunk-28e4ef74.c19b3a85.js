(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28e4ef74"],{"0597":function(e,t,a){"use strict";a("1d36")},"0764":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page_container"},[a("search-module",{attrs:{filtersItem:["time","image","similar"],type:"trackDetail",image:e.image,time:e.$route.params.time,areaTree:e.areaTree},on:{searchData:e.getSearchQuery}}),a("div",{staticClass:"video_container"},[a("div",{staticClass:"video_container_title"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.changeTable},model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},e._l(e.videoType,(function(t){return a("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.label))])})),1),a("span",{on:{click:e.backTo}},[e._v("返回 "),a("i",{staticClass:"el-icon-arrow-right"})])],1),a("div",{staticClass:"video_container_video"},[e.currentUrl[e.currentIndex]?a("video",{ref:"media",attrs:{height:"100%",autoplay:"",controls:"",muted:"",src:e.currentUrl[e.currentIndex]},domProps:{muted:!0},on:{ended:e.nextVideo}}):e._e(),a("div",{staticClass:"video_list_btn"},e._l(e.currentUrl,(function(t,i){return a("span",{key:t,class:e.currentIndex===i?"current_span":"",on:{click:function(t){return e.changeIndex(i)}}},[e._v(" "+e._s(i+1)+" ")])})),0)]),a("div",{staticClass:"video_container_result"},[a("span",[e._v("比对结果（选择下面照片后显示此人进门时全景视频）")]),a("ul",{staticClass:"img_list"},e._l(e.imageList,(function(t){return a("li",{key:t.pid,class:e.currentPid===t.pid?"img_active img_list_item":"img_list_item",on:{click:function(a){return e.chooseImg(t.pid)}}},[a("img",{attrs:{src:t.image_url,width:"113px",height:"149",alt:""}}),a("div",{staticClass:"img_score"},[e._v(" 相似度 "),a("span",{staticClass:"img_score_text"},[e._v("相似度 "),a("i",{staticStyle:{"font-weight":"600","font-size":"14px"}},[e._v(e._s(t.score))]),e._v("%")])])])})),0)])])],1)},r=[],s=a("5530"),n=(a("4160"),a("d3b7"),a("159b"),a("b0c0"),a("07ac"),a("0d03"),a("7f5c")),l=a("c31e"),c={data:function(){return{checkboxGroup:1,videoType:[{id:1,label:"入口检测"},{id:2,label:"出口检测"}],imageList:[],areaTree:[],image:"",currentPid:"",params:{},currentUrl:"",currentIndex:0}},components:{SearchModule:l["a"]},methods:{changeTable:function(e){this.currentPid&&this.getDetail()},getArea:function(e,t){var a="";return this.areaTree.forEach((function(i){i.id===e&&(a+=i.name,i.child.forEach((function(e){e.id===t&&(a+=e.name)})))})),a},getAreaTree:function(){var e=this;Object(n["f"])().then((function(t){e.areaTree=t.data}))},chooseImg:function(e){this.currentPid=e,this.getDetail()},getDetail:function(){var e=this;this.currentUrl=[],this.currentIndex=0,Object(n["p"])(Object(s["a"])(Object(s["a"])({},this.params),{},{pid:this.currentPid,find_type:this.checkboxGroup})).then((function(t){0===t.error_no&&(e.currentUrl=Object.values(t.data))}))},getSearchQuery:function(e){e&&(this.params=e),this.getPids()},getPids:function(){var e=this;Object(n["q"])(Object(s["a"])(Object(s["a"])({},this.params),{},{image:this.image,find_type:this.checkboxGroup})).then((function(t){0===t.error_no&&(e.imageList=t.data)}))},backTo:function(){this.$router.back(-1)},changeIndex:function(e){this.currentIndex=e},nextVideo:function(){if(1===this.currentUrl.length)return document.getElementById("media").currentTime=0,void document.getElementById("media").play();this.currentUrl.length-1>this.currentIndex?this.currentIndex++:this.currentIndex=0}},created:function(){this.getAreaTree()},mounted:function(){this.image=this.$route.params.image,this.params={start_time:new Date(new Date(this.$route.params.time).toLocaleDateString()).getTime(),end_time:new Date(new Date(new Date(this.$route.params.time).toLocaleDateString()).getTime()+864e5-1).getTime(),score:70},this.getPids()}},o=c,m=(a("22bf"),a("2877")),d=Object(m["a"])(o,i,r,!1,null,"0a6ea945",null);t["default"]=d.exports},"07ac":function(e,t,a){var i=a("23e7"),r=a("6f53").values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},"1d36":function(e,t,a){},"22bf":function(e,t,a){"use strict";a("da35")},"6f53":function(e,t,a){var i=a("83ab"),r=a("e330"),s=a("df75"),n=a("fc6a"),l=a("d1e7").f,c=r(l),o=r([].push),m=function(e){return function(t){var a,r=n(t),l=s(r),m=l.length,d=0,u=[];while(m>d)a=l[d++],i&&!c(r,a)||o(u,e?[a,r[a]]:r[a]);return u}};e.exports={entries:m(!0),values:m(!1)}},"87a8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-slider"},[a("div",{staticClass:"my-slider__tooltip",style:e.style},[a("div",{staticClass:"my-slider__tooltip-wrapper",attrs:{size:"mini"}},[e._v(" "+e._s(e.slider)+" ")])]),a("el-slider",{attrs:{"show-tooltip":!1,min:e.min,max:e.max},on:{input:e.input},model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}})],1)},r=[],s=(a("a9e3"),{name:"MySlider",model:{prop:"value",event:"change"},props:{value:{type:Number,default:80},min:{type:Number,default:30},max:{type:Number,default:100}},data:function(){return{slider:this.value}},watch:{value:function(e){this.slider=e}},computed:{style:function(){var e=this.max-this.min,t=this.slider-this.min,a=t/e*100;return{paddingLeft:"".concat(a,"%")}}},methods:{input:function(e){this.$emit("change",e)}}}),n=s,l=(a("b493"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,"3c5963fd",null);t["a"]=c.exports},b493:function(e,t,a){"use strict";a("e8aa")},c31e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input_search"},[e.filters("time")?a("div",{staticClass:"search_item"},[a("h4",[e._v(" 抓拍时间 ")]),a("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.datetimerange,callback:function(t){e.datetimerange=t},expression:"datetimerange"}})],1):e._e(),e.filters("area")?a("div",{staticClass:"search_item"},[a("h4",[e._v("区域")]),a("el-cascader",{attrs:{placeholder:"所有二级区域","collapse-tags":!0,"show-all-levels":!1,options:e.areaOptions,props:{multiple:!0},size:"small",clearable:!0},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1):e._e(),e.filters("camera")?a("div",{staticClass:"search_item"},[a("h4",[e._v("抓拍相机")]),a("el-select",{attrs:{multiple:"","collapse-tags":"",size:"small"},model:{value:e.camera,callback:function(t){e.camera=t},expression:"camera"}},e._l(e.camerasData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.ip,value:e.id}})})),1)],1):e._e(),e.filters("alarmType")?a("div",{staticClass:"search_item"},[a("h4",[e._v("报警类型")]),a("el-select",{attrs:{clearable:"",size:"small"},model:{value:e.alarmType,callback:function(t){e.alarmType=t},expression:"alarmType"}},e._l(e.alarmTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1):e._e(),e.filters("alarmLevel")?a("div",{staticClass:"search_item"},[a("h4",[e._v("报警级别")]),a("el-select",{attrs:{clearable:"",size:"small"},model:{value:e.alarmLevel,callback:function(t){e.alarmLevel=t},expression:"alarmLevel"}},e._l(e.alarmLevelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e.filters("status")?a("div",{staticClass:"search_item"},[a("h4",[e._v("处置状态")]),a("el-select",{attrs:{size:"small"},model:{value:e.dealType,callback:function(t){e.dealType=t},expression:"dealType"}},e._l(e.dealTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e.filters("image")?a("div",{staticClass:"search_item"},[a("h4",[e._v("照片")]),a("div",{staticStyle:{height:"110px","text-align":"center"}},[a("img",{staticClass:"image_class",attrs:{src:"data:image/jpg;base64,"+e.image,alt:""}})])]):e._e(),e.filters("similar")?a("div",{staticClass:"search_item"},[a("h4",[e._v("相似度")]),a("my-slider",{model:{value:e.similarity,callback:function(t){e.similarity=t},expression:"similarity"}})],1):e._e(),e.filters("deviceName")?a("div",{staticClass:"search_item"},[a("h4",[e._v("设备名称")]),a("el-input",{attrs:{size:"small",placeholder:"请输入设备名称"},model:{value:e.deviceName,callback:function(t){e.deviceName=t},expression:"deviceName"}})],1):e._e(),e.filters("ip")?a("div",{staticClass:"search_item"},[a("h4",[e._v("IP地址")]),a("el-input",{attrs:{size:"small",placeholder:"请输入IP地址"},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}})],1):e._e(),e.filters("channel")?a("div",{staticClass:"search_item"},[a("h4",[e._v("channel号")]),a("el-input",{attrs:{size:"small",placeholder:"请输入channel号"},model:{value:e.channel,callback:function(t){e.channel=t},expression:"channel"}})],1):e._e(),a("div",{staticClass:"button_styles"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)])},r=[],s=a("b85c"),n=(a("0d03"),a("b0c0"),a("c975"),a("4160"),a("d3b7"),a("159b"),a("87a8")),l=[{id:5002,label:"物品遗留"},{id:5003,label:"物品拿取"},{id:5006,label:"人员徘徊"},{id:5005,label:"人员滞留"}],c=[{id:5001,label:"客流密度"},{id:5004,label:"人员倒地"},{id:5007,label:"人员聚集"},{id:5008,label:"剧烈运动/打斗"},{id:5009,label:"排队时长"},{id:5010,label:"客流量报警"}],o={props:{filtersItem:{type:Array,default:function(){return[]}},areaTree:{type:Array,default:function(){return[]}},camerasData:{type:Array,default:function(){return[]}},type:{type:String},image:{type:String,default:""},time:{default:""}},data:function(){return{startTime:new Date((new Date).toLocaleDateString()),endTime:new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),datetimerange:[new Date((new Date).toLocaleDateString()),new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1)],areaOptions:[],area:[],camera:[],alarmType:"",dealType:"",dealTypeOptions:[{value:1,label:"已处理"},{value:2,label:"未处理"}],alarmLevel:"",alarmLevelOptions:[{value:1,label:"一级"}],alarmTypeOptions:[],similarity:70,deviceName:"",ip:"",channel:""}},watch:{areaTree:{handler:function(e){this.areaOptions=[];var t,a=Object(s["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,r={label:i.name,value:i.id};if(i.child&&i.child.length>0){r.children=[];var n,l=Object(s["a"])(i.child);try{for(l.s();!(n=l.n()).done;){var c,o=n.value,m=[],d=Object(s["a"])(o.child);try{for(d.s();!(c=d.n()).done;){var u=c.value;m.push({label:u.name,value:u.id})}}catch(h){d.e(h)}finally{d.f()}r.children.push({label:o.name,value:o.id,children:m.length>0?m:void 0})}}catch(h){l.e(h)}finally{l.f()}}this.areaOptions.push(r)}}catch(h){a.e(h)}finally{a.f()}},immediate:!0},time:{handler:function(e){e&&(this.datetimerange=[new Date(new Date(e).toLocaleDateString()),new Date(new Date(new Date(e).toLocaleDateString()).getTime()+864e5-1)],this.startTime=new Date(new Date(e).toLocaleDateString()),this.endTime=new Date(new Date(new Date(e).toLocaleDateString()).getTime()+864e5-1))},immediate:!0}},components:{MySlider:n["a"]},created:function(){"alarmHistory"===this.type?this.alarmTypeOptions=c:this.alarmTypeOptions=l},methods:{filters:function(e){return!!this.filtersItem&&-1!==this.filtersItem.indexOf(e)},submit:function(){var e={},t=[];this.area.length>0&&this.area.forEach((function(e){t.push(e[e.length-1])})),"areaManage"===this.type&&this.area.length>0&&(e={area_ids:t}),"alarmConfig"===this.type&&this.area.length>0&&(e={area_ids:t}),"alarmHistory"===this.type&&(this.area.length>0&&(e.area_ids=t),this.datetimerange[0]&&(e.start_time=this.datetimerange[0].getTime()),this.datetimerange[1]&&(e.end_time=this.datetimerange[1].getTime()),e.type=0,e.camera_ids=this.camera,e.check_status=this.dealType||void 0,e.alarm_source_types=this.alarmType?[this.alarmType]:void 0),"eventSearch"===this.type&&(this.datetimerange[0]&&(e.start_time=this.datetimerange[0].getTime()),this.datetimerange[1]&&(e.end_time=this.datetimerange[1].getTime()),this.area.length>0&&(e.area_ids=t),e.camera_ids=this.camera,e.alarm_source_types=this.alarmType?[this.alarmType]:void 0),"trackDetail"===this.type&&(this.datetimerange[0]&&(e.start_time=this.datetimerange[0].getTime()),this.datetimerange[1]&&(e.end_time=this.datetimerange[1].getTime()),e.score=this.similarity),"takeTrace"===this.type&&(this.area.length>0&&(e.area_ids=t),this.datetimerange[0]&&(e.start_time=this.datetimerange[0].getTime()),this.datetimerange[1]&&(e.end_time=this.datetimerange[1].getTime())),"deviceManage"===this.type&&(e.name=this.deviceName,e.ip=this.ip,e.channel=this.channel),"resourceManage"===this.type&&(this.area.length>0&&(e.area_ids=t),e.name=this.deviceName,e.ip=this.ip,e.channel=this.channel),this.$emit("searchData",e)},reset:function(){this.area=[],this.alarmType="",this.alarmLevel="",this.dealType="",this.camera=[],this.deviceName="",this.channel="",this.ip="",this.datetimerange=[new Date((new Date).toLocaleDateString()),new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1)],this.startTime=new Date((new Date).toLocaleDateString()),this.endTime=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1)}}},m=o,d=(a("0597"),a("2877")),u=Object(d["a"])(m,i,r,!1,null,"3fd3d4d3",null);t["a"]=u.exports},da35:function(e,t,a){},e8aa:function(e,t,a){}}]);