(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f180e056"],{4497:function(t,e,a){"use strict";a("ef55")},9891:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"library_analyse",attrs:{id:"main"}},[a("div",[a("date-choose",{attrs:{"is-group":!0},on:{selectData:t.handleGetDate,exportData:t.handleGetExport}})],1),a("div",{staticClass:"library_analyse_content"},[a("div",{attrs:{id:"verb"}}),a("div",{staticClass:"pie_container"},t._l(t.customCheckStatArray,(function(e){return a("div",{key:e.id,staticClass:"pie_container_row"},[a("el-row",t._l(e.content,(function(t){return a("el-col",{key:t.group_id,attrs:{span:8}},[a("div",{staticStyle:{height:"400px"},attrs:{id:"pie"+t.group_id}})])})),1)],1)})),0)])])},n=[],r=a("5530"),s=(a("4160"),a("d3b7"),a("159b"),a("b0c0"),a("e25e"),a("0d03"),a("e9c4"),a("2f62")),c=a("406e"),o=a("011d"),u=a("d25e"),h=a("48fb"),m=a("8dce"),d=a("365c"),l={name:"libraryStatistic",data:function(){return{customCheckStatArray:[],portraitList:{},pieCharts:[],lineData:[],pieData:[],lineCharts:""}},computed:Object(r["a"])({},Object(s["b"])(["library"])),components:{DateChoose:o["a"]},watch:{library:{handler:function(){var t={};this.library.forEach((function(e){t["".concat(e.id)]=e.name})),this.portraitList=t;var e={start_time:parseInt(((new Date).getTime()-6048e5)/1e3),end_time:parseInt(((new Date).getTime()-864e5)/1e3)},a=[];a.push(e,[],2,[]),this.handleGetDate(a)},immediate:!0}},mounted:function(){Object(c["a"])(document.getElementById("main"),this.resize)},beforeDestroy:function(){Object(c["b"])(document.getElementById("main"),this.resize)},methods:{handleGetExport:function(t){var e=this;if(t){var a=[],i=[],n=[[]];n[1]=[],this.lineData.forEach((function(t){t.items.forEach((function(i){var n={};n["人像库"]=e.getGroupName(t.group_id),n["时间"]=i.title,n["数量"]=i.num,a.push(n)}))})),this.pieData.forEach((function(t){var a={};a["人像库"]=e.getGroupName(t.group_id),a["检索次数"]=t.query_num,a["报警次数"]=t.alarm_num,a["战果次数"]=t.valid_alarm_num,i.push(a)})),a.forEach((function(t){n[0].push(t)})),i.forEach((function(t){n[1].push(t)})),Object(m["a"])(n,["条形图","饼图"],"底库统计");var r={action:"导出",extra:"底库统计"};Object(d["b"])(r).then((function(){}))}},handleGetDate:function(t){var e=this,a={type:t[2],start_time:t[0].start_time,end_time:t[0].end_time,groups:t[3]};Object(h["d"])(a).then((function(t){0===t.error_no&&(t.data.num_items.forEach((function(t){t.name=t.group_id,t.stats=JSON.parse(JSON.stringify(t.items))})),e.lineCharts=Object(u["b"])("verb","底库统计",e.portraitList,t.data.num_items),e.getCustomCheckStat(t.data.alarm_items),e.createPie(t.data.alarm_items),e.lineData=t.data.num_items,e.pieData=t.data.alarm_items)}))},getCustomCheckStat:function(t){var e=t.length,a=Math.ceil(e/3);this.customCheckStatArray=[];for(var i=0;i<a;i++){var n=[];n.push(t[3*i]),t[3*i+1]&&n.push(t[3*i+1]),t[3*i+2]&&n.push(t[3*i+2]),this.customCheckStatArray.push({id:i,content:n})}console.log(this.customCheckStatArray)},createPie:function(t){var e=this;this.pieCharts=[],this.$nextTick((function(){t.forEach((function(t){e.pieCharts.push(Object(u["c"])(document.getElementById("pie".concat(t.group_id)),e.getGroupName(t.group_id),t,"library"))}))}))},getGroupName:function(t){var e="";return this.library.forEach((function(a){a.id===t&&(e=a.name)})),e},resize:function(){this.pieCharts.length>0&&this.pieCharts.forEach((function(t){t.resize()})),this.lineCharts.resize&&this.lineCharts.resize()}}},p=l,f=(a("4497"),a("2877")),_=Object(f["a"])(p,i,n,!1,null,"b1be3078",null);e["default"]=_.exports},ef55:function(t,e,a){}}]);