(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c368ae68"],{"02c2":function(e,t,n){},"24aa":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dept_manege"},[n("div",{staticClass:"dept_manege_search"},[n("h4",[e._v("部门名称：")]),n("el-select",{model:{value:e.dept,callback:function(t){e.dept=t},expression:"dept"}},e._l(e.DeptData,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),n("div",{staticClass:"button_styles"},[n("div",{staticClass:"search_button"},[n("confirmButton",{attrs:{context:"查询",disabled:!1},on:{onClick:e.searchResult}})],1),n("div",[n("chanelButton",{attrs:{context:"重置",disabeld:!1},on:{onClick:e.resetSearch}})],1)])],1),n("div",{staticClass:"dept_manege_result"},[n("div",{staticClass:"add_dept"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:1===e.permission},on:{click:function(t){return e.handleAddDept()}}},[e._v(" 新建 ")])],1),n("div",{ref:"tableContent",staticClass:"dept_manege_result_data"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDeptData,height:e.tableHeight,"header-cell-style":e.headerCellStyle,"cell-style":e.headerCellStyle}},[n("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),n("el-table-column",{attrs:{prop:"name",label:"部门名称",width:"150"}}),n("el-table-column",{attrs:{prop:"comment",label:"备注"}}),n("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleChangeDept(t.row)}}},[e._v("编辑")]),n("el-button",{class:1===e.permission?"icon_size":"icon",attrs:{type:"text",disabled:1===e.permission},on:{click:function(n){return e.handleDelDept(t.row)}}},[e._v(" 删除 ")])]}}])})],1)],1),n("div",{staticClass:"dept_manege_result_pagination"},[n("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[1,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.hanleCurrentChange,"size-change":e.handleSizeChange}})],1)]),n("Dialog",{staticClass:"add_user",attrs:{isVisible:e.isShowDept,width:"500",title:e.isEditDept?"编辑部门":"新增部门"},on:{close:function(t){return e.handleCloseDept()}},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"add_user_item"},[n("span",[n("span",{staticClass:"must_tip"},[e._v("*")]),e._v("部门名称：")]),n("el-input",{attrs:{type:"text"},model:{value:e.newDept.name,callback:function(t){e.$set(e.newDept,"name",t)},expression:"newDept.name"}})],1),n("div",{staticClass:"add_user_item"},[n("span",[e._v("备注：")]),n("el-input",{attrs:{type:"text"},model:{value:e.newDept.remark,callback:function(t){e.$set(e.newDept,"remark",t)},expression:"newDept.remark"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"add_user_item-operate"},[n("el-button",{on:{click:function(t){return e.handleCloseDept()}}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubDept()}}},[e._v(" 确定 ")])],1)]},proxy:!0}])})],1)},r=[],s=(n("b0c0"),n("fb6a"),n("5c96")),a=n("406e"),o=n("431b"),l=n("bcd4"),c=n("f306"),_=n("0fea"),d=n("510e"),u=n("8e6c"),h={name:"deptmanege",mixins:[c["a"]],components:{confirmButton:o["a"],chanelButton:l["a"],Dialog:u["a"]},data:function(){return{dept:"",newDept:{name:"",remark:""},tableDeptData:[],DeptData:[],departmentList:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,page:1,isShowDept:!1,isEditDept:!1,headerCellStyle:{textAlign:"center"},permission:0,tableHeight:0}},mounted:function(){var e=this;this.getDeptData(),this.$nextTick((function(){e.tableHeight=e.$refs.tableContent.offsetHeight,console.log(e.tableHeight),Object(a["a"])(e.$refs.tableContent,e.resize)}))},beforeDestroy:function(){Object(a["b"])(this.$refs.tableContent,this.resize)},methods:{resize:function(){this.$refs.tableContent&&(this.tableHeight=this.$refs.tableContent.offsetHeight)},resetSearch:function(){this.dept=""},handleAddDept:function(){this.isShowDept=!0},handleCloseDept:function(){this.isShowDept=!1,this.newDept.name="",this.newDept.remark="",this.isEditDept=!1},handleChangeDept:function(e){this.isEditDept=!0,this.isShowDept=!0,this.currentDept=e,this.newDept.name=e.name,this.newDept.remark=e.comment},handleDelDept:function(e){var t=this;s["MessageBox"].confirm("确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",customClass:"reset_password"}).then((function(){_["b"].delDept(e.id).then((function(e){if(0===e.error_no){s["Message"].success({message:"删除成功"});var n={current:t.currentPage,size:t.pageSize,total:t.total};t.page=d["a"].formatPage(n,"del"),t.getDeptData()}}))}))["catch"]((function(){}))},searchResult:function(){var e=this,t={name:""===this.dept?void 0:this.dept};_["b"].getDept(t).then((function(t){0===t.error_no&&(e.currentPage=1,e.pageSize=10,e.total=t.data.count,e.tableDeptData=t.data.items)}))},hanleCurrentChange:function(e){0!==this.total&&(this.tableDeptData=this.DeptData.slice(this.pageSize*(e-1),this.pageSize*e)),this.currentPage=e},handleSizeChange:function(e){0!==this.total&&(this.tableDeptData=this.DeptData.slice(e*(this.currentPage-1),e*this.currentPage)),this.pageSize=e},handleSubDept:function(){var e=this;if(""!==this.newDept.name){var t={name:this.newDept.name,comment:this.newDept.remark};this.isEditDept?_["b"].changeDept(this.currentDept.id,t).then((function(t){0===t.error_no&&(e.isShowDept=!1,s["Message"].success({message:"修改成功"}),e.newDept.name="",e.newDept.remark="",e.isEditDept=!1,e.getDeptData())})):_["b"].AddDept(t).then((function(t){if(0===t.error_no){s["Message"].success({message:"添加成功"}),e.isShowDept=!1;var n={current:e.currentPage,size:e.pageSize,total:e.total};e.page=d["a"].formatPage(n,"add",0,!0),e.newDept.name="",e.newDept.remark="",e.isEditDept=!1,e.getDeptData()}}))}else s["Message"].error({message:"请将信息填写完整"})},getDeptData:function(){var e=this;_["b"].getDept().then((function(t){0===t.error_no&&(e.total=t.data.count,e.DeptData=t.data.items,e.currentPage=e.page,e.permission=t.data.permission,e.tableDeptData=e.DeptData.slice(e.pageSize*(e.currentPage-1),e.pageSize*e.currentPage))}))}}},p=h,f=(n("de86"),n("5ab5"),n("2877")),g=Object(f["a"])(p,i,r,!1,null,"5a4a545a",null);t["default"]=g.exports},"2cc9":function(e,t,n){"use strict";n("02c2")},"406e":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));let i=null;function r(e){return i||(i=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),i(e)}let s=null;function a(e){s||(s=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),s(e)}function o(e){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function l(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function c(e,t,n){let i=window.getComputedStyle(e,n||null)||{display:"none"};return i[t]}function _(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;while(t!==document){if("none"===c(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var d='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';let u=0,h=null;function p(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=m.bind(e));let n=e.__resize_listeners__;if(!n)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,i=new ResizeObserver(()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&v(e)}),{detached:r,rendered:s}=_(e);e.__resize_observer_triggered__=!1===r&&!1===s,e.__resize_observer__=i,i.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){v(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(u||(h=o(d)),D(e),e.__resize_rendered__=_(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}e.__resize_listeners__.push(t),u++}function f(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",b),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--u&&h&&h.parentNode.removeChild(h)}}function g(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:i,offsetHeight:r}=e;return i!==t||r!==n?{width:i,height:r}:null}function m(){let{rendered:e,detached:t}=_(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(z(this),this.addEventListener("scroll",b,!0)),this.__resize_rendered__=e,v(this))}function b(){z(this),this.__resize_raf__&&a(this.__resize_raf__),this.__resize_raf__=r(()=>{let e=g(this);e&&(this.__resize_last__=e,v(this))})}function v(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach(t=>{t.call(e,e)})}function D(e){let t=c(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let n=l("div",{className:"resize-triggers"}),i=l("div",{className:"resize-expand-trigger"}),r=l("div"),s=l("div",{className:"resize-contract-trigger"});i.appendChild(r),n.appendChild(i),n.appendChild(s),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:i,expandChild:r,contract:s},z(e),e.addEventListener("scroll",b,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function z(e){let{expand:t,expandChild:n,contract:i}=e.__resize_triggers__,{scrollWidth:r,scrollHeight:s}=i,{offsetWidth:a,offsetHeight:o,scrollWidth:l,scrollHeight:c}=t;i.scrollLeft=r,i.scrollTop=s,n.style.width=a+1+"px",n.style.height=o+1+"px",t.scrollLeft=l,t.scrollTop=c}},"431b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.disabled?"confirm_button disabled":"confirm_button",on:{click:e.activeBtn}},[n("span",[e._v(e._s(e.context))])])},r=[],s={props:["context","disabled"],data:function(){return{}},methods:{activeBtn:function(){this.disabled||this.$emit("onClick")}}},a=s,o=(n("2cc9"),n("2877")),l=Object(o["a"])(a,i,r,!1,null,"18187af3",null);t["a"]=l.exports},"5ab5":function(e,t,n){"use strict";n("dbb47")},bcd4:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.disabled?"confirm_button disabled":"confirm_button",on:{click:e.activeBtn}},[n("span",[e._v(e._s(e.context))])])},r=[],s={props:["context","disabled"],data:function(){return{}},methods:{activeBtn:function(){this.$emit("onClick")}}},a=s,o=(n("f461"),n("2877")),l=Object(o["a"])(a,i,r,!1,null,"6ed08c84",null);t["a"]=l.exports},cacf:function(e,t,n){},d4e3:function(e,t,n){},dbb47:function(e,t,n){},de86:function(e,t,n){"use strict";n("cacf")},f461:function(e,t,n){"use strict";n("d4e3")}}]);