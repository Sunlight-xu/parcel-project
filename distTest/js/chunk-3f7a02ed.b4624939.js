(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f7a02ed"],{3987:function(t,a,e){},"49a0":function(t,a,e){"use strict";e("3987")},"56d0":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"exhibition_container"},[e("div",{staticClass:"des_top"}),e("div",{staticClass:"des_bottom"}),e("div",{staticClass:"page_header"},[e("div",{on:{click:t.showAllTack}},[e("svg-icon",{staticClass:"check_icon",attrs:{"icon-class":"qiehuan"}})],1)]),e("div",{staticClass:"video_container"},[e("div",{staticClass:"video_container_header"},[t._v("实时轨迹视频")]),e("div",{staticClass:"video"},[e("video",{directives:[{name:"show",rawName:"v-show",value:t.videoUrl,expression:"videoUrl"}],attrs:{width:"100%",muted:"",loop:"",autoplay:"",src:t.videoUrl},domProps:{muted:!0}})])]),e("div",{staticClass:"catch_container"},[e("span",{staticClass:"left_button",on:{click:t.rightPage}}),e("div",{staticClass:"catch_content"},t._l(t.catchData,(function(a){return e("div",{key:a.id,staticClass:"catch_item",on:{click:function(e){return t.getPidTracks(a)}}},[e("img",{attrs:{width:"100%",height:"100%",src:a.detected_image_url,alt:""}}),e("div",{directives:[{name:"show",rawName:"v-show",value:a.user_id===t.currentCatch,expression:"item.user_id === currentCatch"}],staticClass:"catch_item_border"})])})),0),e("span",{staticClass:"right_button",on:{click:t.leftPage}})]),e("div",{staticClass:"map_container"},[e("div",{staticClass:"map_container_header"},[t._v("实时轨迹图")]),e("div",{staticStyle:{padding:"56px 50px",width:"100%",height:"100%"}},[e("div",{staticStyle:{width:"100%",height:"100%"}},[e("mapTrack",{attrs:{tracksData:t.tracks,userImg:t.currentImg,showAvatar:!0,isQueue:t.showRealtimeTrack,userPid:t.currentPid}})],1)])]),e("div",{staticClass:"page_footer"})])},s=[],c=(e("4795"),e("ef5a")),r=e("235f"),n={data:function(){return{catchData:[],currentCatch:1,currentPid:"",tracks:[],lastTimestamp:0,trackQueue:[],currentImg:"",showRealtimeTrack:!1,currentPage:1,videoUrl:""}},components:{mapTrack:r["a"]},mounted:function(){this.getCatchData(1,6)},beforeDestroy:function(){clearTimeout(this.timer),clearTimeout(this.trackTimer)},methods:{showAllTack:function(){this.$router.push({name:"allTracks"})},getCatchData:function(t,a){var e=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;Object(c["d"])({page:t,page_size:a}).then((function(t){t.data.snaps&&(e.catchData=t.data.snaps),e.timer=setTimeout((function(){e.currentPage=1,e.getCatchData(1,6)}),i)}))},getPidTracks:function(t){var a=this;this.currentCatch!==t.user_id&&(this.trackQueue=[],this.showRealtimeTrack=!1,this.currentCatch=t.user_id,this.currentImg=t.detected_image_url,clearTimeout(this.trackTimer),Object(c["c"])({pid:t.user_id,track_only:!1},!0).then((function(t){0===t.error_no&&(a.tracks=t.data.trajectory||[],a.lastTimestamp=t.data.last_timestamp||void 0,a.tracks.length>0&&(t.data.videos.length>0?a.videoUrl=t.data.videos[0].video_url:a.videoUrl=""),a.trackTimer=setTimeout((function(){a.getNewTrack()}),5e3))})))},getNewTrack:function(){var t=this;Object(c["c"])({pid:this.currentCatch,last_timestamp:this.lastTimestamp,track_only:!1},!1).then((function(a){0===a.error_no&&(t.showRealtimeTrack=!0,a.data.trajectory&&a.data.trajectory.length>0&&(t.tracks=a.data.trajectory||[]),t.lastTimestamp=a.data.last_timestamp,a.data.videos.length>0&&(t.videoUrl=a.data.videos[0].video_url),t.trackTimer=setTimeout((function(){t.getNewTrack()}),5e3))}))},leftPage:function(){this.currentPage+=1,clearTimeout(this.timer),this.getCatchData(this.currentPage,6,1e4)},rightPage:function(){this.currentPage>1&&(this.currentPage-=1,clearTimeout(this.timer),this.getCatchData(this.currentPage,6,1e4))}}},o=n,d=(e("49a0"),e("2877")),u=Object(d["a"])(o,i,s,!1,null,"2ee88a03",null);a["default"]=u.exports}}]);