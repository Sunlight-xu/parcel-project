(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-537a22ce"],{"07b5":function(t,e,a){"use strict";a("481e")},"481e":function(t,e,a){},"8f42":function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return c}));a("d401"),a("0d03"),a("d3b7"),a("25f0"),a("b64b"),a("d81d"),a("4160"),a("159b");var i=a("313e"),n=a.n(i),s=(a("510e"),["#FF9239","#38D5FC","#FF5BE2","#8484FF","#3ABB2D","#C0C980","#B91D21","#FBE212","#256BBD","#65016C"]),r=function(){var t=Math.floor(16777216*Math.random()).toString(16);while(t.length<6)t="0"+t;return console.log("#"+t),"#"+t},l=function(t,e){var a=document.getElementById(t),i=n.a.init(a),l=Object.keys(e.data);if(l.length>s.length)for(var o=0;o<=l.length-s.length;o++)s.push(r());var c=l.map((function(t,a){return{name:t,type:"line",data:e.data[t],smooth:!0,showSymbol:!1,areaStyle:{opcopacity:.5,color:new n.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:s[a]},{offset:1,color:"rgba(255,255,255,0)"}])}}}));i.clear();var h={color:s,tooltip:{trigger:"axis",padding:[10,20],backgroundColor:"rgba(255, 255, 255, 1)",textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},legend:{data:l,icon:"circle",x:"center",y:"bottom"},grid:{top:"6%",left:"3%",right:"4%",bottom:"9%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.legendData,axisTick:{alignWithLabel:!0,show:!1},axisLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{alignWithLabel:!0,show:!1},splitLine:{lineStyle:{color:"rgba(102,102,102,0.19)"}}},series:c};return h&&i.setOption(h),i},o=function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"flow",l=arguments.length>4?arguments[4]:void 0,o=document.getElementById(t),c=n.a.init(o);c.clear();var h=[],u=[];if("todayalarm"===i?e&&e.forEach((function(t){h.push(t.alarm_type_desc),u.push(t.num)})):"alarm"===i?e&&e.forEach((function(t){h.push(t.alarm_description),u.push(t.num)})):e&&e.forEach((function(t){h.push(t.area_name),u.push(t.total)})),u.length>s.length)for(var p=0;p<=u.length-s.length;p++)s.push(r());var d={color:s,title:{text:l,textStyle:{color:"#000",fontWeight:"500",fontSize:18,fontFamily:"PingFangSC-Medium, PingFang SC"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"#DBDBDB",opacity:.56}},padding:[10,20],backgroundColor:"rgba(255, 255, 255, 1)",textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:h,axisTick:{alignWithLabel:!0,show:!1},axisLine:{show:!1},axisLabel:{interval:0}}],yAxis:[{splitLine:{lineStyle:{color:"rgba(102,102,102,0.19)"}},type:"value",axisLine:{show:!1},axisTick:{show:!1}}],series:[{type:"bar",barWidth:"38",itemStyle:{color:a||"auto"},data:u}]};return d&&c.setOption(d),c},c=function(t,e,a){var i=document.getElementById(t),r=n.a.init(i);r.clear();var l={color:s,title:{text:a,textStyle:{color:"#000",fontWeight:"500",fontSize:18,fontFamily:"PingFangSC-Medium, PingFang SC"}},tooltip:{trigger:"item",backgroundColor:"rgba(255, 255, 255, 1)",padding:[10,20],textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},legend:{top:"5%",left:"center",show:!1},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:e}]};return l&&r.setOption(l),r}},b784:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"analyst_container"},[a("div",{staticClass:"analyst_header"},[a("span",{staticClass:"analyst_header_button"},[a("span",{staticClass:"left_btn",style:t.setSpanStyle("leave"),on:{click:function(e){return t.setStatus("leave")}}},[t._v("离港")]),a("span",{staticClass:"right_btn",style:t.setSpanStyle("enter"),on:{click:function(e){return t.setStatus("enter")}}},[t._v("进港")])])]),a("div",{staticClass:"analyst_line"},[a("div",{staticClass:"item_header"},[a("span",{staticClass:"item_header_title"},[t._v("时段分析")]),a("div",{staticClass:"search-box"},[a("span",{staticStyle:{"margin-right":"32px"}},[a("span",[t._v("选择时段：")]),a("span",[a("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.searchTimeDate,callback:function(e){t.searchTimeDate=e},expression:"searchTimeDate"}})],1)]),a("span",{staticStyle:{"margin-right":"16px"}},[a("span",[t._v("区域：")]),a("span",[a("el-cascader",{attrs:{placeholder:"所有二级区域",props:{multiple:!0,checkStrictly:!0},"collapse-tags":"",options:t.areaOptions,clearable:!0,size:"small"},model:{value:t.timearea,callback:function(e){t.timearea=e},expression:"timearea"}})],1)]),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.searchTimeData}},[t._v("查询")])],1)])]),a("div",{staticClass:"line_charts",attrs:{id:"line"}})]),a("div",{staticClass:"analyst_table"},[a("div",{staticClass:"item_header"},[a("span",{staticClass:"item_header_title"},[t._v("累计分析")]),a("div",{staticClass:"search-box"},[a("span",{staticStyle:{"margin-right":"16px"}},[a("span",[t._v("选择时段：")]),a("span",[a("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.searchTotalDate,callback:function(e){t.searchTotalDate=e},expression:"searchTotalDate"}})],1)]),a("span",{staticStyle:{"margin-right":"32px"}},[a("span",[t._v("区域：")]),a("span",[a("el-cascader",{attrs:{size:"small",placeholder:"",props:{multiple:!0,checkStrictly:!0},"collapse-tags":"",options:t.areaOptions,clearable:!0},model:{value:t.totalarea,callback:function(e){t.totalarea=e},expression:"totalarea"}})],1)]),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.searchTotalData}},[t._v("查询")])],1)])]),a("div",{staticClass:"table_content"},[a("common-table",{attrs:{isShowIndex:!0,tableData:t.tableData,tableColArray:t.tableColumn}})],1)])])},n=[],s=a("b85c"),r=a("5530"),l=(a("0d03"),a("4160"),a("d3b7"),a("159b"),a("c975"),a("d81d"),a("b0c0"),a("406e")),o=a("7f5c"),c=a("8f42"),h=a("b837"),u={data:function(){return{searchTotalDate:[new Date((new Date).getTime()-864e5),new Date],searchTimeDate:[new Date((new Date).getTime()-864e5),new Date],areaOptions:[],timearea:"",totalarea:"",tableColumn:[{label:"一级区域",props:"area_name_l0"},{label:"二级区域",props:"area_name_l1"},{label:"三级区域",props:"area_name_l2"},{label:"离港人次",props:"total"}],tableData:[],status:"leave"}},components:{CommonTable:h["a"]},created:function(){var t=this;Object(o["f"])().then((function(e){0===e.error_no&&(t.areas=e.data,t.getAreaOperations())}))},mounted:function(){this.getTimeData(),this.getTotalData(),Object(l["a"])(document.getElementById("line"),this.resize)},beforeDestroy:function(){Object(l["b"])(document.getElementById("line"),this.resize)},methods:{setStatus:function(t){this.status=t,this.tableColumn.pop(),this.tableColumn.push({label:"leave"===this.status?"离港人次":"进港人次",props:"total"}),this.getAreaOperations(),this.searchTimeData(),this.searchTotalData()},setSpanStyle:function(t){return this.status===t?{background:"#4585C9",color:"#fff"}:{}},createLineChart:function(t){this.lineCharts=Object(c["b"])("line",t)},getTotalData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o["t"])(Object(r["a"])({direction:this.status},e)).then((function(e){0===e.error_no&&(t.tableData=e.data)}))},getTimeData:function(t){var e=this;Object(o["s"])(Object(r["a"])({direction:this.status},t)).then((function(t){if(0===t.error_no){var a={},i=[];t.data.forEach((function(t){-1===i.indexOf(t.event_time)&&i.push(t.event_time)})),i.forEach((function(e){t.data.forEach((function(t){e===t.event_time&&(a[t.area_name]?a[t.area_name].push(t.sum):a[t.area_name]=[t.sum])}))})),e.createLineChart({data:a,legendData:i})}}))},searchTimeData:function(){var t={};this.searchTimeDate&&this.searchTimeDate.length>0&&(t.start_time=this.searchTimeDate[0].getTime(),t.end_time=this.searchTimeDate[1].getTime()),this.timearea&&this.timearea.length>0&&(t.area_ids=this.timearea.map((function(t){return t[t.length-1]}))),this.getTimeData(t)},exportTimeData:function(){},searchTotalData:function(){var t={};this.searchTotalDate&&this.searchTotalDate.length>0&&(t.start_time=this.searchTotalDate[0].getTime(),t.end_time=this.searchTotalDate[1].getTime()),this.totalarea&&this.totalarea.length>0&&(t.area_ids=this.totalarea.map((function(t){return t[t.length-1]}))),this.getTotalData(t)},exportTotalData:function(){},resize:function(){this.lineCharts.resize&&this.lineCharts.resize()},selectAreaChange:function(t){console.log(t)},isContain:function(t){if("leave"===this.status){if(3===t||1===t)return!0}else if("enter"===this.status&&(3===t||2===t))return!0;return!1},getAreaOperations:function(){this.areaOptions=[];var t,e=Object(s["a"])(this.areas);try{for(e.s();!(t=e.n()).done;){var a=t.value,i={label:a.name,value:a.id};if(a.child&&a.child.length>0){i.children=[];var n,r=Object(s["a"])(a.child);try{for(r.s();!(n=r.n()).done;){var l,o=n.value,c=[],h=Object(s["a"])(o.child);try{for(h.s();!(l=h.n()).done;){var u=l.value;this.isContain(u.area_type)&&c.push({label:u.name,value:u.id})}}catch(p){h.e(p)}finally{h.f()}(c.length>0||this.isContain(o.area_type))&&i.children.push({label:o.name,value:o.id,children:c.length>0?c:void 0})}}catch(p){r.e(p)}finally{r.f()}}this.areaOptions.push(i)}}catch(p){e.e(p)}finally{e.f()}}}},p=u,d=(a("07b5"),a("2877")),m=Object(d["a"])(p,i,n,!1,null,"4c11f1ab",null);e["default"]=m.exports}}]);