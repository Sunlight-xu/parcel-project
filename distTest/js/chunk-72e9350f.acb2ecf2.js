(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72e9350f"],{a434:function(t,e,i){"use strict";var r=i("23e7"),a=i("da84"),s=i("23cb"),n=i("5926"),o=i("07fa"),c=i("7b0b"),d=i("65f0"),l=i("8418"),u=i("1dde"),m=u("splice"),p=a.TypeError,f=Math.max,h=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var i,r,a,u,m,_,U=c(this),T=o(U),k=s(t,T),y=arguments.length;if(0===y?i=r=0:1===y?(i=0,r=T-k):(i=y-2,r=h(f(n(e),0),T-k)),T+i-r>v)throw p(g);for(a=d(U,r),u=0;u<r;u++)m=k+u,m in U&&l(a,u,U[m]);if(a.length=r,i<r){for(u=k;u<T-r;u++)m=u+r,_=u+i,m in U?U[_]=U[m]:delete U[_];for(u=T;u>T-r+i;u--)delete U[u-1]}else if(i>r)for(u=T-r;u>k;u--)m=u+r-1,_=u+i-1,m in U?U[_]=U[m]:delete U[_];for(u=0;u<i;u++)U[u+k]=arguments[u+2];return U.length=T-r+i,a}})},a743:function(t,e,i){},ade6:function(t,e,i){"use strict";i("a743")},d022:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"main_container"},[i("div",{staticClass:"search_container"},[i("div",{staticClass:"top_video"},[i("div",{staticClass:"track_map"},[i("ul",{staticClass:"track_map_portrait"},t._l(t.portraitData,(function(e){return i("li",{key:e.pid,on:{click:function(i){return t.changePid(e.pid)}}},[i("img",{style:t.getpid(e.pid),attrs:{src:e.image_url,alt:""}})])})),0),i("mapTrack",{attrs:{"tracks-data":t.tracks,"is-real-time-track":!0,"user-img":t.currentImg,"user-pid":t.currentPid},on:{trackChange:t.getTrackTimestamp}})],1),i("div",{staticClass:"side_video"},[i("div",{staticClass:"side_video_item"},[t.videoUrls[0]?i("video",{attrs:{autoplay:"",src:t.videoUrls[0]},on:{ended:function(e){return t.videoEnd(0)}}}):t._e()]),i("div",{staticClass:"side_video_item"},[t.videoUrls[1]?i("video",{attrs:{autoplay:"",src:t.videoUrls[1]},on:{ended:function(e){return t.videoEnd(1)}}}):t._e()])])]),i("div",{staticClass:"bottom_video"},[i("div",{staticClass:"bottom_video_item"},[t.videoUrls[2]?i("video",{attrs:{autoplay:"",src:t.videoUrls[2]},on:{ended:function(e){return t.videoEnd(2)}}}):t._e()]),i("div",{staticClass:"bottom_video_item"},[t.videoUrls[3]?i("video",{attrs:{autoplay:"",src:t.videoUrls[3]},on:{ended:function(e){return t.videoEnd(3)}}}):t._e()]),i("div",{staticClass:"bottom_video_item_last"},[t.videoUrls[4]?i("video",{attrs:{autoplay:"",src:t.videoUrls[4]},on:{ended:function(e){return t.videoEnd(4)}}}):t._e()])])])])},a=[],s=(i("4795"),i("4160"),i("d3b7"),i("159b"),i("c975"),i("45fc"),i("4e82"),i("a434"),i("ac1f"),i("1276"),i("fefb")),n=i("235f"),o={data:function(){return{videoUrls:["","","","",""],getUrls:[],cacheUrls:[],urlsStack:[],timer:"",setTimer:"",tracks:[],portraitData:[],currentTimestamp:0,currentPid:"",currentImg:""}},components:{mapTrack:n["a"]},watch:{currentTimestamp:function(){var t=this;clearInterval(this.timer),clearTimeout(this.setTimer),this.changeVideoUrls(),this.setTimer=setTimeout((function(){t.timer=setInterval((function(){t.getRealtimeValue()}),5e3)}),500)}},mounted:function(){var t=this;Object(s["q"])().then((function(e){0===e.error_no&&e.data&&e.data.length>=1&&e.data.forEach((function(e){t.portraitData.push(e)})),t.timer=setInterval((function(){t.getRealtimeValue()}),5e3)}))},beforeDestroy:function(){clearTimeout(this.setTimer),clearInterval(this.timer)},methods:{changeVideoUrl:function(){var t=this;if(!(this.getUrls.length<1)){var e,i=[];if(this.getUrls.forEach((function(e){-1===t.videoUrls.indexOf(e)&&-1===t.cacheUrls.indexOf(e)&&i.push(e)})),this.videoUrls.some((function(e,r){if(!e){if(!t.getVideoTime(i[i.length-1]).start)return!0;if(i.length>=1&&t.currentTimestamp>t.getVideoTime(i[i.length-1]).start-1e3){var a=i.pop();t.videoUrls[r]=a,t.cacheUrls.push(a)}}return!0})),i.length>0)(e=this.urlsStack).push.apply(e,i)}},changeVideoUrls:function(){var t=this;if(!(this.getUrls.length<1)){var e=[];this.getUrls.forEach((function(i){-1===t.cacheUrls.indexOf(i)&&e.push(i)})),e.sort((function(e,i){return t.getVideoTime(e).start-t.getVideoTime(i).start})),this.videoUrls.forEach((function(i,r){if(!i){var a=-1;e.length>0&&(e.some((function(e,i){return console.log(t.getVideoTime(e).start,t.currentTimestamp,-1===t.cacheUrls.indexOf(e)),!(t.currentTimestamp>t.getVideoTime(e).start&&-1===t.cacheUrls.indexOf(e))||(console.log(t.currentTimestamp,e,"in"),t.videoUrls.splice(r,1,e),t.cacheUrls.push(e),a=i,!0)})),-1!==a&&e.splice(a,1))}}))}},changePid:function(t){var e=this;t!==this.currentPid&&(this.currentPid=t,this.tracks=[],this.videoUrls=["","","","",""],this.cacheUrls=[],this.portraitData.forEach((function(i){i.pid===t&&(i.trajectory.forEach((function(t){e.tracks.push({pos_x:t.point.x,pos_y:t.point.y,timestamp:t.timestamp})})),e.getUrls=i.videos,e.currentImg=i.image_url)})))},getRealtimeValue:function(){var t=this;Object(s["q"])().then((function(e){if(0===e.error_no)if(t.portraitData=[],e.data&&e.data.length>=1){var i=!1;e.data.forEach((function(e){t.portraitData.push(e)})),""===t.currentPid&&(i=!0),t.portraitData.some((function(e){if(t.currentPid===e.pid){i=!0;var r=[];return console.log(t.tracks),e.trajectory.forEach((function(i){e.timestamp>t.tracks[t.tracks.length-1].timestamp&&r.push({pos_x:i.point.x,pos_y:i.point.y,timestamp:i.timestamp})})),r.length>0&&(t.tracks=r),t.getUrls=e.videos,t.currentImg=e.image_url,!0}return!0})),i||(t.tracks=[],t.currentPid=t.portraitData[0].pid,t.portraitData[0].trajectory.forEach((function(e){t.tracks.push({pos_x:e.point.x,pos_y:e.point.y,timestamp:e.timestamp})})),t.getUrls=t.portraitData[0].videos,t.currentImg=t.portraitData[0].image_url)}else t.currentImg="",t.tracks=[],t.portraitData=[],t.currentPid="",t.getUrls=[]}))},getVideoTime:function(t){if(!t)return{};var e={},i=t.split("_").reverse();return e={start:i[3].split("-")[1],end:i[2].split("-")[1]},e},videoEnd:function(t){this.videoUrls.splice(t,1,"")},getTrackTimestamp:function(t){this.currentTimestamp=t},getpid:function(t){return t===this.currentPid?{border:"3px solid red"}:{}}}},c=o,d=(i("ade6"),i("2877")),l=Object(d["a"])(c,r,a,!1,null,"0872c0df",null);e["default"]=l.exports}}]);