(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ac6040b"],{"190f":function(t,a,e){},"38cf":function(t,a,e){var s=e("23e7"),i=e("1148");s({target:"String",proto:!0},{repeat:i})},"41b1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"page_container"},[e("div",{staticClass:"left_part"},[e("div",{staticClass:"people_analyst"},[e("div",{staticClass:"block_header"},[e("span",{staticClass:"block_header_title"},[t._v("客流分析")]),e("span",{staticClass:"block_header_text"},[t._v("更新时间 "+t._s(t.statCountUpdateTime))])]),e("div",{staticClass:"people_analyst_stat"},[e("div",{staticClass:"people_analyst_stat"},t._l(t.statCount,(function(t,a){return e("div",{key:a,staticClass:"people_analyst_stat_item",staticStyle:{"margin-bottom":"32px"}},[e("threshold-item",{attrs:{title:a,count:t[0],backgroundColor:t[2],thresholdCount:t[1]}})],1)})),0)])]),e("div",{staticClass:"today_alarm"},[e("div",{staticClass:"block_header"},[e("span",{staticClass:"block_header_title"},[t._v("今日事件报警统计")]),e("span",{staticClass:"block_header_text"},[t._v("更新时间 "+t._s(t.alarmUpdateTime))])]),e("div",{staticClass:"today_alarm_stat",attrs:{id:"alarm-bar"}})])]),e("div",{staticClass:"right_part"},[e("div",{staticClass:"pass_count"},[e("div",{staticClass:"block_header"},[e("span",{staticClass:"analyst_header_button"},[e("el-radio-group",{staticClass:"el-radio-group",attrs:{fill:"#FFFFFF","text-color":"#3A658E",size:"small"},on:{change:t.statStreamChanged},model:{value:t.currStreamType,callback:function(a){t.currStreamType=a},expression:"currStreamType"}},t._l(t.statStreamData,(function(t,a){return e("el-radio-button",{key:a,staticClass:"el-radio-button",attrs:{label:t.name}})})),1)],1),e("span",{staticClass:"block_header_text"},[t._v("更新时间 "+t._s(t.statStreamUpdateTime))])]),e("div",{staticClass:"pass_count_stat"},t._l(t.currStreamData,(function(a,s){return e("div",{key:s,staticClass:"pass_count_stat_item"},[e("span",{staticClass:"pass_count_item_header"},[t._v(t._s(a.name))]),t._l(a.items,(function(a,s){return e("div",{key:s,staticClass:"pass_count_item_content"},[e("div",{staticClass:"pass_count_item_content_header"},t._l(a,(function(a,s){return e("span",{key:s,staticClass:"pass_count_item_content_header_item"},[t._v(" "+t._s(a.name)+" ")])})),0),e("div",{staticClass:"pass_count_item_content_items"},t._l(a,(function(a,s){return e("span",{key:s,staticClass:"pass_count_item_content_items_item"},[t._v(" "+t._s(a.count)+" ")])})),0)])}))],2)})),0)]),e("div",{staticClass:"order_analyst"},[e("div",{staticClass:"block_header"},[e("span",{staticClass:"block_header_title title-box"},[t._v("排队分析")]),e("span",{staticClass:"block_header_text"},[t._v("更新时间 "+t._s(t.statQueueUpdateTime))])]),e("div",{staticClass:"order_analyst_stat"},t._l(t.statQueueData,(function(a,s){return e("div",{key:s,staticClass:"order_analyst_stat_item"},[e("span",{staticClass:"order_analyst_stat_item_header"},[t._v(t._s(a.name))]),e("div",{staticClass:"order_analyst_stat_item_content"},[e("div",{staticClass:"order_analyst_stat_item_content_header"},[e("span",{staticClass:"order_analyst_stat_item_content_header_item",staticStyle:{width:"81px","min-width":"81px"}},[t._v(" 预估 ")]),t._l(a.items,(function(a,s){return e("el-tooltip",{key:s,attrs:{content:a.name,placement:"top",effect:"light"}},[e("span",{staticClass:"order_analyst_stat_item_content_header_item"},[t._v(" "+t._s(a.name)+" ")])])}))],2),e("div",{staticClass:"order_analyst_stat_item_content_items"},[e("span",{staticClass:"order_analyst_stat_item_content_items_item",staticStyle:{"font-weight":"500",width:"81px","min-width":"81px"}},[t._v(" 预计时长 ")]),t._l(a.items,(function(a,s){return e("span",{key:s,staticClass:"order_analyst_stat_item_content_items_item"},[t._v(" "+t._s(a.predict_time)+" ")])}))],2),e("div",{staticClass:"order_analyst_stat_item_content_items"},[e("span",{staticClass:"order_analyst_stat_item_content_items_item",staticStyle:{"font-weight":"500",width:"81px","min-width":"81px"}},[t._v(" 排队人数 ")]),t._l(a.items,(function(a,s){return e("span",{key:s,staticClass:"order_analyst_stat_item_content_items_item"},[t._v(" "+t._s(a.count)+" ")])}))],2)])])})),0)])])])},i=[],n=e("b85c"),r=(e("0d03"),e("b0c0"),e("4160"),e("d3b7"),e("159b"),e("406e")),o=e("7f5c"),l=e("8f42"),c=e("e3c6"),d=e("c930"),u={data:function(){return{statStreamData:[],currStreamType:"",currStreamData:[],statCountData:[],statCount:{},statQueueData:[],statCountUpdateTime:"",statStreamUpdateTime:"",statQueueUpdateTime:"",alarmUpdateTime:""}},components:{ThresholdItem:c["a"]},mounted:function(){this.setupTimers(),Object(r["a"])(document.getElementById("alarm-bar"),this.resize)},beforeDestroy:function(){Object(r["b"])(document.getElementById("alarm-bar"),this.resize)},methods:{setupTimers:function(){var t=this;this.timer=new d["a"](this,5e3,(function(){t.getStatStreamData(),t.getStatCountData(),t.getStatQueueData(),t.getAlarmAnalyst()})).start(0,!0)},getStatStreamData:function(){var t=this;Object(o["m"])().then((function(a){0===a.error_no&&(t.statStreamUpdateTime=new Date(a.data.refresh_time).toLocaleString(),a.data.stats?t.statStreamData=a.data.stats:t.statStreamData=[]),""===t.currStreamType&&t.statStreamData.length>0?(t.currStreamType=t.statStreamData[0].name,t.currStreamData=t.statStreamData[0].items):t.statStreamChanged()}))},statStreamChanged:function(){var t,a=Object(n["a"])(this.statStreamData);try{for(a.s();!(t=a.n()).done;){var e=t.value;if(e.name===this.currStreamType){this.currStreamData=e.items;break}}}catch(s){a.e(s)}finally{a.f()}},getStatCountData:function(){var t=this;Object(o["k"])().then((function(a){if(0===a.error_no)if(t.statCountUpdateTime=new Date(a.data.refresh_time).toLocaleString(),a.data.stats){t.statCountData=a.data.stats;var e={};t.statCountData.forEach((function(a){e[a.name]=[a.count,a.threshold.alarm_level3||0,t.getItemColor(a)]})),t.statCount=e}else t.statCountData=[]}))},getStatQueueData:function(){var t=this;Object(o["l"])().then((function(a){0===a.error_no&&(t.statQueueUpdateTime=new Date(a.data.refresh_time).toLocaleString(),a.data.stats?t.statQueueData=a.data.stats:t.statQueueData=[])}))},getAlarmAnalyst:function(){var t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(o["n"])(a).then((function(a){if(0===a.error_no)if(t.alarmUpdateTime=new Date(a.data.refresh_time).toLocaleString(),t.barChart){var e=[],s=[];a.data.stats&&a.data.stats.forEach((function(t){e.push(t.alarm_type_desc),s.push(t.num)})),t.barChart.setOption({xAxis:[{type:"category",data:e,axisTick:{alignWithLabel:!0}}],series:[{type:"bar",barWidth:"40%",data:s}]})}else t.barChart=Object(l["a"])("alarm-bar",a.data.stats,"#3C91B9","todayalarm")}))},resize:function(){this.barChart&&this.barChart.resize()},getItemColor:function(t){var a="linear-gradient(90deg, #157F10 0%, #BFEBA8 100%)";return t.count>t.threshold.alarm_level3?a="linear-gradient(90deg, #BF0C0C 0%, #FFACAC 100%)":t.count>t.threshold.alarm_level2?a="linear-gradient(90deg, #DC9538 0%, #FDDE01 100%)":t.count>t.threshold.alarm_level1&&(a="linear-gradient(90deg, #013F80 0%, #85D8FF 100%)"),a}}},h=u,_=(e("d325"),e("2877")),m=Object(_["a"])(h,s,i,!1,null,"301b4c4a",null);a["default"]=m.exports},"429a":function(t,a,e){},4678:function(t,a,e){"use strict";e("190f")},"8f42":function(t,a,e){"use strict";e.d(a,"b",(function(){return o})),e.d(a,"a",(function(){return l})),e.d(a,"c",(function(){return c}));e("d401"),e("0d03"),e("d3b7"),e("25f0"),e("b64b"),e("d81d"),e("4160"),e("159b");var s=e("313e"),i=e.n(s),n=(e("510e"),["#FF9239","#38D5FC","#FF5BE2","#8484FF","#3ABB2D","#C0C980","#B91D21","#FBE212","#256BBD","#65016C"]),r=function(){var t=Math.floor(16777216*Math.random()).toString(16);while(t.length<6)t="0"+t;return console.log("#"+t),"#"+t},o=function(t,a){var e=document.getElementById(t),s=i.a.init(e),o=Object.keys(a.data);if(o.length>n.length)for(var l=0;l<=o.length-n.length;l++)n.push(r());var c=o.map((function(t,e){return{name:t,type:"line",data:a.data[t],smooth:!0,showSymbol:!1,areaStyle:{opcopacity:.5,color:new i.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:n[e]},{offset:1,color:"rgba(255,255,255,0)"}])}}}));s.clear();var d={color:n,tooltip:{trigger:"axis",padding:[10,20],backgroundColor:"rgba(255, 255, 255, 1)",textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},legend:{data:o,icon:"circle",x:"center",y:"bottom"},grid:{top:"6%",left:"3%",right:"4%",bottom:"9%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.legendData,axisTick:{alignWithLabel:!0,show:!1},axisLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{alignWithLabel:!0,show:!1},splitLine:{lineStyle:{color:"rgba(102,102,102,0.19)"}}},series:c};return d&&s.setOption(d),s},l=function(t,a,e){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"flow",o=arguments.length>4?arguments[4]:void 0,l=document.getElementById(t),c=i.a.init(l);c.clear();var d=[],u=[];if("todayalarm"===s?a&&a.forEach((function(t){d.push(t.alarm_type_desc),u.push(t.num)})):"alarm"===s?a&&a.forEach((function(t){d.push(t.alarm_description),u.push(t.num)})):a&&a.forEach((function(t){d.push(t.area_name),u.push(t.total)})),u.length>n.length)for(var h=0;h<=u.length-n.length;h++)n.push(r());var _={color:n,title:{text:o,textStyle:{color:"#000",fontWeight:"500",fontSize:18,fontFamily:"PingFangSC-Medium, PingFang SC"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"#DBDBDB",opacity:.56}},padding:[10,20],backgroundColor:"rgba(255, 255, 255, 1)",textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:d,axisTick:{alignWithLabel:!0,show:!1},axisLine:{show:!1},axisLabel:{interval:0}}],yAxis:[{splitLine:{lineStyle:{color:"rgba(102,102,102,0.19)"}},type:"value",axisLine:{show:!1},axisTick:{show:!1}}],series:[{type:"bar",barWidth:"38",itemStyle:{color:e||"auto"},data:u}]};return _&&c.setOption(_),c},c=function(t,a,e){var s=document.getElementById(t),r=i.a.init(s);r.clear();var o={color:n,title:{text:e,textStyle:{color:"#000",fontWeight:"500",fontSize:18,fontFamily:"PingFangSC-Medium, PingFang SC"}},tooltip:{trigger:"item",backgroundColor:"rgba(255, 255, 255, 1)",padding:[10,20],textStyle:{color:"#000",fontWeight:"400",fontSize:13},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);"},legend:{top:"5%",left:"center",show:!1},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:a}]};return o&&r.setOption(o),r}},c930:function(t,a,e){"use strict";e("38cf"),e("4795");var s=function(t,a,e){var s=this;this.vueObj=t,this.handler=e,this.timeout=a,this.started=!1,this.repeat=0,this.id=-1,this.start=function(t,a){var e=this;this.started||(this.repeat=t,a&&this.handler(),this.id=setInterval((function(){e.handler(),e.repeat>0&&(e.repeat--,e.repeat<=0&&e.stop())}),this.timeout))},this.stop=function(){this.id>=0&&(clearInterval(this.id),this.id=-1),this.started=!1},null!==this.vueObj&&this.vueObj.$once("hook:beforeDestroy",(function(){s.stop()}));var i=this;return{start:function(t,a){return i.start(t,a),this},stop:function(){i.stop()}}};a["a"]=s},d325:function(t,a,e){"use strict";e("429a")},e3c6:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"item",staticClass:"threshold_item"},[e("span",{ref:"title",staticClass:"threshold_item_title"},[t._v(t._s(t.title))]),e("div",{ref:"bar",staticClass:"threshold_item_bar"},[e("span",{ref:"item",staticClass:"threshold_item_bar_item",style:t.itemStyle},[e("i",{ref:"count",staticClass:"threshold_item_bar_item_count",style:t.countStyle},[t._v(t._s(t.count)+"人")])]),e("span",{staticClass:"threshold_item_bar_line"}),e("i",{staticClass:"threshold_item_bar_tip"},[t._v("保障能力"+t._s(t.handleNumber(t.thresholdCount))+"人")])])])},i=[],n=(e("a9e3"),e("510e")),r={props:{title:{type:String,default:""},count:{type:Number,default:0},backgroundColor:{type:String,default:"linear-gradient(90deg, #0341F2 0%, #62ECF9 100%)"},thresholdCount:{type:Number,default:0}},data:function(){return{countStyle:{},itemStyle:{}}},watch:{count:function(){this.resize()}},computed:{},mounted:function(){this.resize()},beforeDestroy:function(){},methods:{handleNumber:function(t){return n["a"].handleNumber(t)},resize:function(){var t=0,a=this.$refs.bar.offsetWidth,e=(a-100)/a;t=this.count!==this.thresholdCount?this.count>this.thresholdCount?100:this.count/this.thresholdCount*100*e:100*e,this.itemStyle={width:"".concat(t,"%"),background:this.backgroundColor},t*a/100-this.$refs.count.offsetWidth<this.$refs.title.offsetWidth&&(this.countStyle={left:"".concat(this.$refs.title.offsetWidth+18,"px")})}}},o=r,l=(e("4678"),e("2877")),c=Object(l["a"])(o,s,i,!1,null,"5d4b369e",null);a["a"]=c.exports}}]);